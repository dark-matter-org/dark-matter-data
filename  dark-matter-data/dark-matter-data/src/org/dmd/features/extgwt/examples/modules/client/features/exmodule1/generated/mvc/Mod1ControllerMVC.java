//	---------------------------------------------------------------------------
//	dark-matter-data
//	Copyright (c) 2011 dark-matter-data committers
//	---------------------------------------------------------------------------
//	This program is free software; you can redistribute it and/or modify it
//	under the terms of the GNU Lesser General Public License as published by the
//	Free Software Foundation; either version 3 of the License, or (at your
//	option) any later version.
//	This program is distributed in the hope that it will be useful, but WITHOUT
//	ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
//	FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for
//	more details.
//	You should have received a copy of the GNU Lesser General Public License along
//	with this program; if not, see <http://www.gnu.org/licenses/lgpl.html>.
//	---------------------------------------------------------------------------
package org.dmd.features.extgwt.examples.modules.client.features.exmodule1.generated.mvc;

import com.extjs.gxt.ui.client.mvc.Controller;
import com.extjs.gxt.ui.client.mvc.Dispatcher;
import com.extjs.gxt.ui.client.mvc.AppEvent;
import com.extjs.gxt.ui.client.event.EventType;
import com.extjs.gxt.ui.client.Registry;
import org.dmd.features.extgwt.client.ApplicationIF;
import org.dmd.features.extgwt.examples.modules.client.features.exmodule1.extended.Mod1View;

/**
 * The Mod1Controller does some things.
 * <P>
 * This code was auto-generated by the mvcgenerator utility and shouldn't be altered manually!
 * Generated from: org.dmd.features.extgwt.extended.MvcController.initCodeGenInfo(MvcController.java:91)
 */
abstract public class Mod1ControllerMVC extends Controller {

    // Resources
    protected ApplicationIF application;

    // Events
    public EventType CommonInit;
    public EventType CommonLoggedIn;
    public EventType Mod1DataReady;

    // View(s)
    protected Mod1ViewMVC mod1View;

    protected Mod1ControllerMVC(){
        // Resolve our events
        CommonInit = getApplication().getEvent("common.init");
        CommonLoggedIn = getApplication().getEvent("common.loggedIn");
        Mod1DataReady = getApplication().getEvent("mod1.dataReady");

        registerEventTypes(CommonInit);
        registerEventTypes(CommonLoggedIn);
        registerEventTypes(Mod1DataReady);

        // Instantiate our views
        mod1View = new Mod1View(this);
    }

    /**
     * Derived classes must override this method to perform their initialization behaviour.
     */
    abstract protected void initialize();

    public void handleEvent(AppEvent event) {
        EventType type = event.getType();
        if (type == CommonInit) {
            handleCommonInitEvent(event);
            forwardToView(mod1View,event);
        }
        else if (type == CommonLoggedIn) {
            handleCommonLoggedInEvent(event);
        }
    }

    /**
     * The derived class must overload this method to handle the common.init event.
     * <P>
     * The init event is generated once the user has logged in to the system.
     */
    abstract protected void handleCommonInitEvent(AppEvent event);

    /**
     * The derived class must overload this method to handle the common.loggedIn event.
     * <P>
     * The loggedIn event is usually generated when the user has successfully
     * logged into a required service.
     */
    abstract protected void handleCommonLoggedInEvent(AppEvent event);

    /**
     * @return This is the universal handle to the application.
     */
    protected ApplicationIF getApplication(){
        if (application == null)
            application = (ApplicationIF) Registry.get("application");
        return(application);
    }

    public void dispatchMod1DataReady(){
        Dispatcher.get().dispatch(Mod1DataReady);
    }

}
