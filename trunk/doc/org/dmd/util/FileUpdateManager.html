<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_27) on Tue Oct 23 14:25:32 EDT 2012 -->
<TITLE>
FileUpdateManager
</TITLE>

<META NAME="date" CONTENT="2012-10-23">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FileUpdateManager";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FileUpdateManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/dmd/util/DmcTraceableOutputStream.html" title="class in org.dmd.util"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/dmd/util/LinkedBlockingQueue.html" title="class in org.dmd.util"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/dmd/util/FileUpdateManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FileUpdateManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.dmd.util</FONT>
<BR>
Class FileUpdateManager</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>org.dmd.util.FileUpdateManager</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>FileUpdateManager</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
The FileUpdateManager is a code generation helper class that will only replace an
 existing file if the newly generated file is different from a previously generated
 one. It also tracks the set of files that are generated to a particular output
 folder and will automatically remove files that are no longer required. This is
 especially useful when removing files for classes that have been removed from 
 schemas or renamed.
 <P>
 This mechanism is useful when you include Dark Matter code generation as part of
 your build process because it cuts down on the number of files that have to be
 recompiled; if code hasn't changed, the FileUpdateManager leaves the original file
 (and its time stamp) intact, so unneeded recompilation is avoided.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#deleteFiles(boolean)">deleteFiles</A></B>(boolean&nbsp;f)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete files for obsolete files defaults to true.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#fileClosed(org.dmd.util.ManagedFileWriter)">fileClosed</A></B>(<A HREF="../../../org/dmd/util/ManagedFileWriter.html" title="class in org.dmd.util">ManagedFileWriter</A>&nbsp;mfw)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called from the ManagedFileWriter when its close() method is called.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#fileHeader(java.lang.String)">fileHeader</A></B>(java.lang.String&nbsp;fh)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the file header that will be automatically written to your files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#generationComplete()">generationComplete</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method should be called when a code generation cycle is complete.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#generationStarting()">generationStarting</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You should call this method when you are about to start a code generation cycle.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/dmd/util/ManagedFileWriter.html" title="class in org.dmd.util">ManagedFileWriter</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#getWriter(java.lang.String, java.lang.String)">getWriter</A></B>(java.lang.String&nbsp;of,
          java.lang.String&nbsp;fn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use this method to get a BufferedWriter for the file you're generating and close it
 as normal when you're done.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../org/dmd/util/FileUpdateManager.html" title="class in org.dmd.util">FileUpdateManager</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#instance()">instance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#reportErrors(java.io.PrintStream)">reportErrors</A></B>(java.io.PrintStream&nbsp;ps)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the stream to which error messages will be dumped.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/dmd/util/FileUpdateManager.html#reportProgress(java.io.PrintStream)">reportProgress</A></B>(java.io.PrintStream&nbsp;ps)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the stream to which progress messages will be dumped.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="instance()"><!-- --></A><H3>
instance</H3>
<PRE>
public static <A HREF="../../../org/dmd/util/FileUpdateManager.html" title="class in org.dmd.util">FileUpdateManager</A> <B>instance</B>()</PRE>
<DL>
<DD><DL>

<DT><B>Returns:</B><DD>a handle to the FileUpdateManager.</DL>
</DD>
</DL>
<HR>

<A NAME="deleteFiles(boolean)"><!-- --></A><H3>
deleteFiles</H3>
<PRE>
public void <B>deleteFiles</B>(boolean&nbsp;f)</PRE>
<DL>
<DD>Delete files for obsolete files defaults to true. If you only to wish to receive
 warnings of these files, set this to false.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>f</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="reportProgress(java.io.PrintStream)"><!-- --></A><H3>
reportProgress</H3>
<PRE>
public void <B>reportProgress</B>(java.io.PrintStream&nbsp;ps)</PRE>
<DL>
<DD>Sets the stream to which progress messages will be dumped.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ps</CODE> - The print stream.</DL>
</DD>
</DL>
<HR>

<A NAME="reportErrors(java.io.PrintStream)"><!-- --></A><H3>
reportErrors</H3>
<PRE>
public void <B>reportErrors</B>(java.io.PrintStream&nbsp;ps)</PRE>
<DL>
<DD>Sets the stream to which error messages will be dumped.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ps</CODE> - The print stream.</DL>
</DD>
</DL>
<HR>

<A NAME="fileHeader(java.lang.String)"><!-- --></A><H3>
fileHeader</H3>
<PRE>
public void <B>fileHeader</B>(java.lang.String&nbsp;fh)</PRE>
<DL>
<DD>Sets the file header that will be automatically written to your files.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fh</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="generationStarting()"><!-- --></A><H3>
generationStarting</H3>
<PRE>
public void <B>generationStarting</B>()</PRE>
<DL>
<DD>You should call this method when you are about to start a code generation cycle.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="generationComplete()"><!-- --></A><H3>
generationComplete</H3>
<PRE>
public void <B>generationComplete</B>()</PRE>
<DL>
<DD>This method should be called when a code generation cycle is complete. It will check
 each of the folder where code was generated and verify that all of the .java files
 in the folder were generated during this code generation run. If it finds .java files
 in the folder that were not recorded during the generation, they will be deleted.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getWriter(java.lang.String, java.lang.String)"><!-- --></A><H3>
getWriter</H3>
<PRE>
public <A HREF="../../../org/dmd/util/ManagedFileWriter.html" title="class in org.dmd.util">ManagedFileWriter</A> <B>getWriter</B>(java.lang.String&nbsp;of,
                                   java.lang.String&nbsp;fn)
                            throws java.io.IOException</PRE>
<DL>
<DD>Use this method to get a BufferedWriter for the file you're generating and close it
 as normal when you're done. If the file doesn't yet exist, it will be written straight to
 your output directory. However, if the file exists, we will write the file to the
 working folder and perform a comparison with the existing file. The files are different,
 we'll replace the existing file, if not, we just leave the existing file alone.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>of</CODE> - The output folder.<DD><CODE>fn</CODE> - The name of the file to be generated.
<DT><B>Returns:</B><DD>A BufferedWriter derivative that informs the FileUpdateManager when it's closed.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="fileClosed(org.dmd.util.ManagedFileWriter)"><!-- --></A><H3>
fileClosed</H3>
<PRE>
public void <B>fileClosed</B>(<A HREF="../../../org/dmd/util/ManagedFileWriter.html" title="class in org.dmd.util">ManagedFileWriter</A>&nbsp;mfw)</PRE>
<DL>
<DD>This method is called from the ManagedFileWriter when its close() method is called. If
 required, we check the file to see if we need to replace it.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>mfw</CODE> - </DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FileUpdateManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/dmd/util/DmcTraceableOutputStream.html" title="class in org.dmd.util"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/dmd/util/LinkedBlockingQueue.html" title="class in org.dmd.util"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/dmd/util/FileUpdateManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FileUpdateManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
